# 1-关于dll和注入

## toc

1. [1-关于dll和注入](#1-关于dll和注入)
    1. [toc](#toc)
    2. [关于dll](#关于dll)
    3. [关于如何调用里面的函数](#关于如何调用里面的函数)

## 关于dll

> 2024-06-12 10:28:13

DLL 注入：将外部代码“塞进”别人的程序
想象一下，你有一段代码，你想让它在其他程序运行时也能执行，这就是 DLL 注入的目的。

什么是 DLL 注入？

DLL 注入 (DLL Injection) 是一种技术，它允许你将一个动态链接库 (DLL) 文件加载到另一个正在运行的进程的地址空间中。由于该 DLL 现在成为了目标进程的一部分，它里面的代码就可以访问目标进程的资源，例如内存、文件句柄等，并影响其行为。

为什么要进行 DLL 注入？

DLL 注入的动机可以是善意的，也可以是恶意的，取决于使用者的目的。

正当理由：

扩展程序功能： 开发者可以利用 DLL 注入为现有程序添加新功能，例如插件系统。
监控和调试： 安全软件可以使用 DLL 注入来监控目标进程的行为，或者帮助开发者调试程序。
修改程序行为： 例如，游戏玩家可能会使用 DLL 注入来修改游戏的速度或添加作弊功能。
恶意目的：

恶意软件感染： 攻击者可以将恶意 DLL 注入到合法程序中，以窃取数据、控制系统或传播病毒。
绕过安全软件： 一些恶意软件会使用 DLL 注入来隐藏自身，或绕过安全软件的检测。
DLL 注入的效果：

DLL 注入的效果取决于被注入的 DLL 中的代码。它可以：

读取和修改目标进程的内存： 例如，读取游戏中的状态信息或修改游戏角色的能力值。
调用目标进程的函数： 例如，调用游戏中的函数来执行特定动作。
挂钩目标进程的函数： 例如，拦截网络通信或记录键盘输入。
创建新的线程： 例如，在后台运行恶意代码。
总结：

DLL 注入是一种强大的技术，它可以用于合法和非法目的。了解 DLL 注入的原理和风险，对于保护系统安全和开发更强大的软件都至关重要。

## 关于如何调用里面的函数

> 问的ai gemini1.5pro

> 在我的印象中，dll不是写了一些函数库什么的吗？ 单纯的注入进去，如果不调用里面的函数，那不是没效果吗？

你说的没错！ DLL 本身就像一个工具箱，里面装着各种函数工具。单纯把它塞进目标进程，就像把工具箱扔进别人的工作室，如果没人使用里面的工具，那确实没啥效果。

DLL 注入后的“自动运行”机制：

为了让 DLL 注入后发挥作用，需要在 DLL 内部设置一些“机关”，让它在特定时机自动运行某些代码。常见的机制有：

DLLMain 入口函数： 每个 DLL 都可以有一个特殊的 DllMain 函数。当 DLL 被加载或卸载到进程空间时，系统会自动调用这个函数。开发者可以在 DllMain 中编写初始化代码，例如创建线程、设置钩子等，让 DLL 在后台悄悄地做一些事情。
导出函数： DLL 可以选择性地公开一些函数，供其他程序调用。注入 DLL 后，攻击者可以设法让目标进程主动调用这些导出函数，从而执行恶意代码。
资源回调函数： DLL 可以包含资源，例如图标、字符串等。当目标进程加载这些资源时，DLL 可以设置回调函数，在资源加载前后执行代码。
举例说明：

假设你想写一个 DLL，用来记录某个程序的键盘输入。你可以在 DLL 中：

在 DllMain 函数中设置一个全局的键盘钩子。
编写一个记录键盘输入的函数，并将其导出。
当目标进程加载 DLL 时，DllMain 函数会被调用，设置的键盘钩子会拦截所有键盘输入。
拦截到的键盘输入会被传递给记录函数，保存到文件中。
这样，即使目标进程没有显式调用 DLL 中的任何函数，DLL 注入后也能自动记录键盘输入。

总结：

DLL 注入本身只是将 DLL 放入目标进程，要实现特定功能，还需要开发者在 DLL 内部设置相应的机制，让 DLL 中的代码在合适的时机自动执行。


<CommentService/>
